<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Enigma Machine - 10 Rotors</title>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #7e22ce 100%);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    color: #fff;
  }

  .container {
    background: rgba(15, 23, 42, 0.95);
    backdrop-filter: blur(20px);
    border-radius: 25px;
    padding: 40px;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
    max-width: 1200px;
    width: 100%;
    animation: fadeIn 0.8s ease-out;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

 h1 {
  text-align: center;
  margin-bottom: 14px;
  font-size: 3em;
  font-weight: 800;
  letter-spacing: 1px;

  color: #ffffff;

  text-shadow:
    0 2px 8px rgba(0,0,0,0.7),
    0 0 20px rgba(255,255,255,0.25);
}




  .subtitle {
    text-align: center;
    color: #94a3b8;
    margin-bottom: 30px;
    font-size: 1.1em;
  }

  .main-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;
    margin-bottom: 30px;
  }

  @media (max-width: 768px) {
    .main-grid {
      grid-template-columns: 1fr;
    }
  }

  .section {
    background: rgba(30, 41, 59, 0.8);
    border-radius: 20px;
    padding: 25px;
    border: 1px solid rgba(148, 163, 184, 0.2);
    backdrop-filter: blur(10px);
  }

  .section-title {
    font-weight: 700;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.2em;
    color: #e2e8f0;
  }

  .icon {
    width: 24px;
    height: 24px;
    display: inline-block;
  }

  .bit-inputs {
    display: flex;
    gap: 12px;
    justify-content: center;
    flex-wrap: wrap;
  }

  @media (max-width: 768px) {
    .bit-inputs {
      flex-wrap: nowrap;
      gap: 8px;
      padding: 0 10px;
      overflow-x: auto;
      justify-content: flex-start;
    }
  }

  input {
    width: 55px;
    height: 55px;
    text-align: center;
    font-size: 22px;
    font-weight: bold;
    border: 2px solid rgba(148, 163, 184, 0.3);
    border-radius: 12px;
    transition: all 0.3s ease;
    background: rgba(15, 23, 42, 0.8);
    color: #60a5fa;
  }

  @media (max-width: 768px) {
    input.in {
      width: 50px;
      height: 50px;
      font-size: 18px;
      flex-shrink: 0;
    }
  }

  input.in {
    cursor: pointer;
    border-color: rgba(96, 165, 250, 0.5);
  }

  input.in.disabled {
    cursor: not-allowed;
    background: rgba(51, 65, 85, 0.8);
    border-color: rgba(148, 163, 184, 0.2);
    color: #64748b;
  }

  input.in:focus {
    border-color: #60a5fa;
    outline: none;
    transform: scale(1.1);
    box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
    background: rgba(30, 41, 59, 0.9);
  }

  input.auto-out {
    background: rgba(16, 185, 129, 0.2);
    color: #10b981;
    cursor: not-allowed;
    border-color: rgba(16, 185, 129, 0.5);
    font-weight: bold;
  }

  input.auto-out.match {
    background: rgba(251, 191, 36, 0.3);
    color: #f59e0b;
    border-color: rgba(251, 191, 36, 0.7);
    box-shadow: 0 0 15px rgba(251, 191, 36, 0.4);
    animation: matchPulse 1s ease-in-out;
  }

  @keyframes matchPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }

  input.out {
    background: rgba(51, 65, 85, 0.8);
    color: #a78bfa;
    cursor: not-allowed;
    border-color: rgba(167, 139, 250, 0.5);
  }

  .control-panel {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 25px;
  }

  .control-group {
    background: rgba(30, 41, 59, 0.6);
    padding: 15px;
    border-radius: 12px;
    border: 1px solid rgba(148, 163, 184, 0.2);
  }

  .control-label {
    font-size: 0.9em;
    color: #94a3b8;
    margin-bottom: 8px;
    font-weight: 600;
  }

  select, input[type="number"], input[type="text"] {
    width: 100%;
    padding: 8px 12px;
    background: rgba(15, 23, 42, 0.8);
    border: 1px solid rgba(148, 163, 184, 0.3);
    border-radius: 8px;
    color: #e2e8f0;
    font-size: 14px;
  }

  select:focus, input[type="number"]:focus, input[type="text"]:focus {
    outline: none;
    border-color: #60a5fa;
    box-shadow: 0 0 10px rgba(96, 165, 250, 0.2);
  }

  .button-group {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin: 30px 0;
    flex-wrap: wrap;
  }

  button {
    font-size: 14px;
    font-weight: 700;
    padding: 12px 25px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
  }

  button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.5s;
  }

  button:hover::before {
    left: 100%;
  }

  .btn-primary {
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    color: white;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
  }

  .btn-primary.play-pulse {
    animation: playButtonPulse 1s ease-in-out infinite;
    font-size: 16px;
    padding: 14px 30px;
    min-width: 150px;
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border: 2px solid #f87171;
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.6);
  }

  @keyframes playButtonPulse {
    0%, 100% { 
      transform: scale(1); 
      box-shadow: 0 4px 15px rgba(239, 68, 68, 0.6);
      background: linear-gradient(135deg, #ef4444, #dc2626);
      border-color: #f87171;
    }
    50% { 
      transform: scale(1.1); 
      box-shadow: 0 12px 40px rgba(239, 68, 68, 0.9);
      background: linear-gradient(135deg, #dc2626, #b91c1c);
      border-color: #fca5a5;
    }
  }

  .bet-prompt {
    animation: betPromptPulse 1s ease-in-out infinite;
    will-change: transform, opacity, filter;
    backface-visibility: hidden;
    transform: translateZ(0);
  }

  /* ·∫®n c√°c h·ªôp kh√¥ng c·∫ßn thi·∫øt */
  .control-panel {
    display: none !important;
  }
  
  .process-flow {
    display: none !important;
  }
  
  .button-group {
    display: none !important;
  }
  
  #info {
    display: none !important;
  }
  
  .section:not(.capital-section):not(.game-info-section) {
    display: none !important;
  }
  
  /* ·∫®n th√™m statistics v√† operation history */
  .section:has(.stat-item),
  .section:has(#history),
  .section:has(.stats-grid),
  .section:has(.history-panel) {
    display: none !important;
  }
  
  /* ·∫®n rotor states */
  .section:has(.rotor-grid) {
    display: none !important;
  }
  
  /* ·∫®n main-grid th·ª© hai (ch·ª©a statistics v√† operation history) */
  .main-grid:nth-of-type(2) {
    display: none !important;
  }
  
  /* ·∫®n t·∫•t c·∫£ c√°c section sau main-grid ƒë·∫ßu ti√™n */
  .container > .main-grid:nth-of-type(2),
  .container > .section:not(.capital-section):not(.game-info-section) {
    display: none !important;
  }
  
  /* ·∫®n main-grid th·ª© hai v√† t·∫•t c·∫£ n·ªôi dung b√™n trong */
  .container > .main-grid:nth-of-type(2),
  .container > .main-grid:nth-of-type(2) > .section,
  .container > .main-grid:nth-of-type(2) .stats-grid,
  .container > .main-grid:nth-of-type(2) .history-panel {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    overflow: hidden !important;
  }
  
  /* ·∫®n c·ª• th·ªÉ c√°c ph·∫ßn kh√¥ng c·∫ßn thi·∫øt */
  .section:has(.rotor-grid),
  .section:has(.stats-grid),
  .section:has(.history-panel),
  .section:has(#history) {
    display: none !important;
  }
  
  /* ·∫®n T·∫§T C·∫¢ c√°c ph·∫ßn sau game-info-section */
  .game-info-section ~ * {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    overflow: hidden !important;
    position: absolute !important;
    top: -9999px !important;
    left: -9999px !important;
  }
  
  /* Ch·ªâ hi·ªÉn th·ªã 4 h·ªôp ch√≠nh */
  .capital-section,
  .game-info-section,
  .main-grid .section:nth-child(1),
  .main-grid .section:nth-child(2) {
    display: block !important;
    visibility: visible !important;
    height: auto !important;
    position: static !important;
    top: auto !important;
    left: auto !important;
  }
  
  /* CƒÉn gi·ªØa 4 h·ªôp ch√≠nh */
  .main-grid {
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    max-width: 800px;
    margin: 0 auto;
  }
  
  .capital-section {
    grid-column: 1 / -1;
    margin-bottom: 20px;
  }

  @keyframes betPromptPulse {
    0%, 100% { 
      opacity: 1;
      transform: scale(1) translateY(0) translateZ(0);
      text-shadow: 0 0 15px rgba(255, 0, 100, 1), 0 0 30px rgba(255, 0, 100, 0.8);
      filter: brightness(1.2) saturate(1.5);
      color: #ff0064;
      box-shadow: 0 4px 15px rgba(245, 158, 11, 0.6);
    }
    50% { 
      opacity: 0.8;
      transform: scale(1.1) translateY(-4px) translateZ(0);
      text-shadow: 0 0 25px rgba(255, 0, 100, 1), 0 0 50px rgba(255, 0, 100, 0.8);
      filter: brightness(1.6) saturate(2);
      color: #ff0064;
      box-shadow: 0 12px 40px rgba(245, 158, 11, 0.9);
    }
  }

  .btn-secondary {
    background: linear-gradient(135deg, #10b981, #06b6d4);
    color: white;
  }

  .btn-secondary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(16, 185, 129, 0.4);
  }

  .btn-danger {
  background: linear-gradient(135deg, #ef4444, #f97316);
  color: white;

   font-size: 1em;
  padding: 0.8em 1.4em;
  
  min-width: clamp(40px, 20vw, 100px);
   line-height: 1.2;
  padding: 0.8em 1.4em;
  height: auto;
  
  border-radius: 10px;
  border: 2px solid rgba(239, 68, 68, 0.5);
  display: block;
  margin: 40px auto 0;
}

  .btn-danger:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(239, 68, 68, 0.4);
  }

  #info {
    text-align: center;
    padding: 20px;
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
    border-radius: 15px;
    font-family: 'Courier New', monospace;
    font-weight: 600;
    color: #e2e8f0;
    margin: 20px 0;
    border: 2px solid rgba(96, 165, 250, 0.3);
    font-size: 1.1em;
  }

  .rotor-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
    gap: 10px;
    margin-top: 20px;
  }

  .rotor-item {
    text-align: center;
    padding: 12px;
    background: rgba(30, 41, 59, 0.8);
    border-radius: 10px;
    border: 1px solid rgba(148, 163, 184, 0.2);
    transition: all 0.3s ease;
  }

  .rotor-item:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(96, 165, 250, 0.2);
    border-color: rgba(96, 165, 250, 0.4);
  }

  .rotor-name {
    font-weight: bold;
    color: #60a5fa;
    margin-bottom: 5px;
    font-size: 0.9em;
  }

  .rotor-value {
    font-family: 'Courier New', monospace;
    color: #a78bfa;
    font-size: 0.85em;
  }

  .history-panel {
    max-height: 200px;
    overflow-y: auto;
    background: rgba(15, 23, 42, 0.8);
    border-radius: 10px;
    padding: 15px;
    border: 1px solid rgba(148, 163, 184, 0.2);
  }

  .history-item {
    padding: 8px;
    margin: 5px 0;
    background: rgba(30, 41, 59, 0.6);
    border-radius: 8px;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
    color: #94a3b8;
    border-left: 3px solid #60a5fa;
  }

  .process-flow {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin: 20px 0;
    flex-wrap: wrap;
  }

  .process-step {
    padding: 8px 15px;
    background: rgba(59, 130, 246, 0.2);
    border: 1px solid rgba(96, 165, 250, 0.4);
    border-radius: 20px;
    font-size: 0.85em;
    color: #60a5fa;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  .arrow {
    color: #a78bfa;
    font-weight: bold;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-top: 20px;
  }

  .stat-item {
    text-align: center;
    padding: 15px;
    background: rgba(30, 41, 59, 0.6);
    border-radius: 10px;
    border: 1px solid rgba(148, 163, 184, 0.2);
  }

  .stat-value {
    font-size: 1.5em;
    font-weight: bold;
    color: #60a5fa;
  }

  .stat-label {
    font-size: 0.85em;
    color: #94a3b8;
    margin-top: 5px;
  }

  .capital-section {
    background: rgba(30, 41, 59, 0.8);
    border-radius: 20px;
    padding: 20px;
    border: 1px solid rgba(148, 163, 184, 0.2);
    margin-bottom: 20px;
    text-align: center;
  }

  .capital-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    margin-top: 15px;
  }

  @media (max-width: 768px) {
    .capital-controls {
      flex-direction: column;
      gap: 15px;
      align-items: stretch;
    }

    .capital-input-group {
      order: 1;
    }

    .capital-displays {
      order: 2;
      flex-direction: column;
      gap: 10px;
    }
  }

  .capital-input-group {
    display: flex;
    gap: 10px;
    align-items: center;
    justify-content: center;
  }

  @media (max-width: 768px) {
    .capital-input-group {
      flex-direction: column;
      gap: 15px;
    }

    .capital-input-group input {
      width: 100%;
      max-width: 300px;
    }

    #startBetting {
      width: 100%;
      max-width: 200px;
      margin-bottom: 35px;
    }
  }

  .capital-input-group input {
    width: 200px;
    padding: 10px;
    background: rgba(15, 23, 42, 0.8);
    border: 1px solid rgba(148, 163, 184, 0.3);
    border-radius: 8px;
    color: #e2e8f0;
    font-size: 16px;
  }

  .capital-displays {
    display: flex;
    gap: 15px;
    align-items: flex-start;
  }

  @media (max-width: 768px) {
    .capital-displays {
      flex-direction: column;
      gap: 10px;
      width: 100%;
    }

    .capital-displays > div {
      width: 100%;
    }

    .capital-display, .profit-display {
      width: 100%;
      min-width: auto;
      max-width: 300px;
      margin: 0 auto;
    }
  }

  .capital-displays > div {
    flex: 1;
  }

  .display-label {
    font-size: 0.9em;
    color: #94a3b8;
    text-align: center;
    margin-bottom: 5px;
    font-weight: 600;
  }

  .capital-display {
    font-size: 2em;
    font-weight: bold;
    color: #10b981;
    text-align: center;
    padding: 15px;
    background: rgba(16, 185, 129, 0.1);
    border-radius: 12px;
    border: 2px solid rgba(16, 185, 129, 0.3);
    min-width: 200px;
    min-height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .profit-display {
    font-size: 2em;
    font-weight: bold;
    color: #f59e0b;
    text-align: center;
    padding: 15px;
    background: rgba(245, 158, 11, 0.1);
    border-radius: 12px;
    border: 2px solid rgba(245, 158, 11, 0.3);
    min-width: 200px;
    min-height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .profit-display.positive {
    color: #10b981;
    background: rgba(16, 185, 129, 0.1);
    border-color: rgba(16, 185, 129, 0.3);
  }

  .profit-display.negative {
    color: #ef4444;
    background: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
  }

  .input-betting-section {
    margin-bottom: 20px;
  }

  .output-section, .auto-input-section {
    margin-bottom: 20px;
  }

  .game-info-section {
    margin-bottom: 30px;
  }

  .multiplier-inputs {
    display: flex;
    gap: 8px;
    align-items: center;
    justify-content: center;
    flex-wrap: nowrap;
    margin-bottom: 20px;
  }

  .multiplier-input {
    width: 50px;
    height: 38px;
    text-align: center;
    font-size: 14px;
    font-weight: bold;
    border: 2px solid rgba(148, 163, 184, 0.3);
    border-radius: 8px;
    background: rgba(15, 23, 42, 0.8);
    color: #f59e0b;
    transition: all 0.3s ease;
  }

  .multiplier-input:focus {
    border-color: #f59e0b;
    outline: none;
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(245, 158, 11, 0.3);
  }

  #startBetting {
    margin-bottom: 35px;
  }

  .x1000-display {
    font-size: 1.2em;
    font-weight: bold;
    color: #ef4444;
    margin-left: 10px;
    padding: 8px 15px;
    background: rgba(239, 68, 68, 0.2);
    border-radius: 8px;
    border: 1px solid rgba(239, 68, 68, 0.4);
  }

  .betting-history {
    max-height: 150px;
    overflow-y: auto;
    background: rgba(15, 23, 42, 0.8);
    border-radius: 10px;
    padding: 15px;
    border: 1px solid rgba(148, 163, 184, 0.2);
    margin-top: 15px;
  }

  .bet-history-item {
    padding: 8px;
    margin: 5px 0;
    background: rgba(30, 41, 59, 0.6);
    border-radius: 8px;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
    border-left: 3px solid #f59e0b;
  }

  .bet-history-item.win {
    border-left-color: #10b981;
    background: rgba(16, 185, 129, 0.1);
  }

  .bet-history-item.lose {
    border-left-color: #ef4444;
    background: rgba(239, 68, 68, 0.1);
  }

  .game-status {
    text-align: center;
    padding: 20px;
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(239, 68, 68, 0.1));
    border-radius: 12px;
    font-weight: bold;
    margin: 15px 0;
    border: 2px solid rgba(245, 158, 11, 0.3);
    font-size: 1.2em;
    transition: all 0.3s ease;
  }

  .game-status.success-pulse {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.4), rgba(5, 150, 105, 0.4));
    border: 3px solid #10b981;
    color: #ffffff;
    font-size: 1.4em;
    animation: successPulse 1.2s ease-in-out infinite;
    box-shadow: 0 0 40px rgba(16, 185, 129, 0.8);
    text-shadow: 0 0 15px rgba(255, 255, 255, 0.9);
    position: relative;
    overflow: hidden;
  }

  .game-status.success-pulse::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    animation: shimmer 2s linear infinite;
  }

  @keyframes successPulse {
    0%, 100% { 
      transform: scale(1); 
      box-shadow: 0 0 40px rgba(16, 185, 129, 0.8);
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.4), rgba(5, 150, 105, 0.4));
    }
    25% { 
      transform: scale(1.05); 
      box-shadow: 0 0 60px rgba(16, 185, 129, 1);
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.6), rgba(5, 150, 105, 0.6));
    }
    50% { 
      transform: scale(1.08); 
      box-shadow: 0 0 80px rgba(16, 185, 129, 1.2);
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.7), rgba(5, 150, 105, 0.7));
    }
    75% { 
      transform: scale(1.05); 
      box-shadow: 0 0 60px rgba(16, 185, 129, 1);
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.6), rgba(5, 150, 105, 0.6));
    }
  }

  @keyframes shimmer {
    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
    100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
  }

  .game-status.play-prompt {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(29, 78, 216, 0.3));
    border: 3px solid #3b82f6;
    color: #ffffff;
    font-size: 1.3em;
    animation: playPromptPulse 1s ease-in-out infinite;
    box-shadow: 0 0 25px rgba(59, 130, 246, 0.6);
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
  }

  @keyframes warningPulse {
    0%, 100% { 
      transform: scale(1); 
      box-shadow: 0 0 30px rgba(239, 68, 68, 0.6);
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(185, 28, 28, 0.3));
    }
    50% { 
      transform: scale(1.08); 
      box-shadow: 0 0 50px rgba(239, 68, 68, 0.8);
      background: linear-gradient(135deg, rgba(239, 68, 68, 0.5), rgba(185, 28, 28, 0.5));
    }
  }

  @keyframes playPromptPulse {
    0%, 100% { 
      transform: scale(1); 
      box-shadow: 0 0 25px rgba(59, 130, 246, 0.6);
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(29, 78, 216, 0.3));
    }
    50% { 
      transform: scale(1.06); 
      box-shadow: 0 0 40px rgba(59, 130, 246, 0.8);
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.5), rgba(29, 78, 216, 0.5));
    }
  }

  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: rgba(30, 41, 59, 0.8);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb {
    background: rgba(96, 165, 250, 0.5);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgba(96, 165, 250, 0.7);
  }

  /* X√≥a m≈©i t√™n trong √¥ input type="number */
  input[type="number"]::-webkit-outer-spin-button,
  input[type="number"]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    appearance: none;
    margin: 0;
  }
  
  input[type="number"] {
    -moz-appearance: textfield;
    appearance: textfield;
  }
</style>
</head>
<body>

<div class="container">
  <h1>üîê Advanced Enigma Machine</h1>
  <p class="subtitle">10 Rotors ‚Ä¢ Multiple Modes ‚Ä¢ Advanced Cryptography</p>

  <div class="control-panel">
    <div class="control-group">
      <div class="control-label">üîß Encryption Mode</div>
      <select id="mode">
        <option value="ecb">ECB (Electronic Codebook)</option>
        <option value="cbc">CBC (Cipher Block Chaining)</option>
        <option value="ctr">CTR (Counter)</option>
        <option value="chain">Chain Mode</option>
      </select>
    </div>
    <div class="control-group">
      <div class="control-label">üîÑ Rounds</div>
      <input type="number" id="rounds" min="1" max="10" value="3">
    </div>
    <div class="control-group">
      <div class="control-label">üîë Key (Hex)</div>
      <input type="text" id="customKey" value="C0FFEE99" maxlength="8">
    </div>
    <div class="control-group">
      <div class="control-label">üìä IV (Hex)</div>
      <input type="text" id="customIV" value="12345678" maxlength="8">
    </div>
  </div>

  
  <!-- Capital Display Section -->
  <div class="capital-section">
    <div class="section-title">
      <span class="icon">üí∞</span>
      T·ªïng V·ªën Hi·ªán T·∫°i
    </div>
    <div class="capital-controls">
      <div class="capital-input-group">
        <input type="text" id="initialCapital" placeholder="Nh·∫≠p v·ªën ban ƒë·∫ßu">
        <button id="setCapital" class="btn-secondary">üí∞ Nh·∫≠p V·ªën</button>
      </div>
      <div class="capital-displays">
        <div>
          <div class="display-label">V·ªën Hi·ªán T·∫°i</div>
          <div class="capital-display" id="currentCapital">0</div>
        </div>
        <div>
          <div class="display-label">L√£i/L·ªó Round</div>
          <div class="profit-display" id="profitDisplay">0</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Input and Betting Section -->
  <div class="main-grid">
    <div class="section">
    
     <div class="section-title" style="margin: 20px;">
        <span class="icon">üé≤</span>
        M·ª©c C∆∞·ª£c (x1000)
      </div>
      <div class="multiplier-inputs">
        <input type="number" class="multiplier-input" id="mult1" inputmode="numeric">
        <input type="number" class="multiplier-input" id="mult2" inputmode="numeric">
        <input type="number" class="multiplier-input" id="mult3" inputmode="numeric">
        <input type="number" class="multiplier-input" id="mult4" inputmode="numeric">
        <input type="number" class="multiplier-input" id="mult5" inputmode="numeric">
      </div>
   
<div style="display: flex; gap: 15px; justify-content: center; margin-bottom: 35px;">
  <button id="startBetting" class="btn-primary play-pulse">üéÆ Play</button>
   

  </div>
        
      <div class="section-title">
        <span class="icon">üì•</span>
        Input Bits & M·ª©c C∆∞·ª£c
      </div>
      
      <div class="bit-inputs">
        <input class="in" maxlength="1" placeholder="0/1" inputmode="numeric" pattern="[01]">
        <input class="in" maxlength="1" placeholder="0/1" inputmode="numeric" pattern="[01]">
        <input class="in" maxlength="1" placeholder="0/1" inputmode="numeric" pattern="[01]">
        <input class="in" maxlength="1" placeholder="0/1" inputmode="numeric" pattern="[01]">
        <input class="in" maxlength="1" placeholder="0/1" inputmode="numeric" pattern="[01]">
      </div>
       </div>

     
    <div class="section">
      <div class="section-title">
        <span class="icon">üì§</span>
        Output Bits
      </div>
      <div class="bit-inputs">
        <input class="out" readonly>
        <input class="out" readonly>
        <input class="out" readonly>
        <input class="out" readonly>
        <input class="out" readonly>
      </div>
      
      <div class="section-title" style="margin-top: 20px;">
        <span class="icon">üîÑ</span>
        Auto-Processing Input
        <span style="font-size: 0.8em; color: #f59e0b; margin-left: 10px;">üü° = Match with Output</span>
      </div>
      
      <button id="randomBtn" class="btn-secondary" style="margin-bottom: 15px; width: 100%; display: none;">
        üé≤ Random 5 Bit (Auto)
      </button>
      
      <div class="bit-inputs">
        <input class="auto-out" readonly>
        <input class="auto-out" readonly>
        <input class="auto-out" readonly>
        <input class="auto-out" readonly>
        <input class="auto-out" readonly>
      </div>
     <button id="reset" class="btn-danger">üîÑ Reset Game</button>
    </div>
    
  </div>

  <!-- Game Status and History -->
  <div class="game-info-section">
    <div class="game-status" id="gameStatus">
      üéØ S·∫µn s√†ng ƒë·∫∑t c∆∞·ª£c - Nh·∫≠p 5 bit ƒë·ªÉ b·∫Øt ƒë·∫ßu
    </div>
    
    <div class="betting-history" id="bettingHistory">
      <div class="bet-history-item">H·ªá th·ªëng ƒë·∫∑t c∆∞·ª£c ƒë√£ s·∫µn s√†ng</div>
    </div>
  </div>

  <div class="process-flow" id="processFlow">
    <div class="process-step">Input</div>
    <span class="arrow">‚Üí</span>
    <div class="process-step">Permutation</div>
    <span class="arrow">‚Üí</span>
    <div class="process-step">Rotor 1-10</div>
    <span class="arrow">‚Üí</span>
    <div class="process-step">Final Mix</div>
    <span class="arrow">‚Üí</span>
    <div class="process-step">Output</div>
  </div>

  <div class="button-group">
       <button id="encrypt" class="btn-primary">üîê Encrypt</button>
    <button id="decrypt" class="btn-secondary">üîì Decrypt</button>
        <button id="export" class="btn-primary">üíæ Export State</button>
    <button id="import" class="btn-secondary">üìÇ Import State</button>
  </div>

  <div id="info">Advanced Enigma Ready - 10 Rotors Active</div>

  <div class="section">
    <div class="section-title">
      <span class="icon">‚öôÔ∏è</span>
      Rotor States (Real-time)
    </div>
    <div class="rotor-grid" id="rotorGrid">
      <!-- Rotor states will be populated here -->
    </div>
  </div>

  <div class="main-grid">
    <div class="section">
      <div class="section-title">
        <span class="icon">üìà</span>
        Statistics
      </div>
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value" id="totalOps">0</div>
          <div class="stat-label">Total Operations</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="entropy">0.00</div>
          <div class="stat-label">Entropy Score</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="cycles">0</div>
          <div class="stat-label">Key Cycles</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="diffusion">0%</div>
          <div class="stat-label">Diffusion Rate</div>
        </div>
      </div>
    </div>

    <div class="section">
      <div class="section-title">
        <span class="icon">üìú</span>
        Operation History
      </div>
      <div class="history-panel" id="history">
        <div class="history-item">System initialized - Advanced Enigma ready</div>
      </div>
    </div>
  </div>
</div>

<script>
/* ======= ADVANCED ENIGMA MACHINE ======= */

// Global variables
let KEY, IV;
let r1, r2, r3, r4, r5, r6, r7, r8, r9, r10;
let step, totalOps, keyCycles;
let previousCipher = 0;
let operationHistory = [];
let currentMode = 'ecb';

// Betting system variables
let currentCapital = 0;
let initialCapital = 0;
let bettingActive = false;
let bettingHistory = [];
let currentBetRound = 0;
let baseBetAmount = 1000;
let roundProfit = 0; // L√£i c·ªßa round hi·ªán t·∫°i
let profitThresholdReached = false; // ƒê√£ ƒë·∫°t ng∆∞·ª°ng l√£i 20%

// DOM elements
const inputs = document.querySelectorAll(".in");
const autoOuts = document.querySelectorAll(".auto-out");
const outputs = document.querySelectorAll(".out");
const info = document.getElementById("info");
const rotorGrid = document.getElementById("rotorGrid");
const history = document.getElementById("history");

// Betting DOM elements
const initialCapitalInput = document.getElementById("initialCapital");
const currentCapitalDisplay = document.getElementById("currentCapital");
const profitDisplay = document.getElementById("profitDisplay");
const startBettingBtn = document.getElementById("startBetting");
const setCapitalBtn = document.getElementById("setCapital");
const gameStatusDisplay = document.getElementById("gameStatus");
const bettingHistoryPanel = document.getElementById("bettingHistory");
const multiplierInputs = document.querySelectorAll(".multiplier-input");
const randomBtn = document.getElementById("randomBtn");

// Initialize rotor grid display
function initRotorDisplay() {
  rotorGrid.innerHTML = '';
  for (let i = 1; i <= 10; i++) {
    const rotorItem = document.createElement('div');
    rotorItem.className = 'rotor-item';
    rotorItem.innerHTML = `
      <div class="rotor-name">Rotor ${i}</div>
      <div class="rotor-value" id="r${i}-info">0</div>
    `;
    rotorGrid.appendChild(rotorItem);
  }
}

// Initialize state
function initState() {
  KEY = parseInt(document.getElementById('customKey').value, 16) || 0xC0FFEE99;
  IV = parseInt(document.getElementById('customIV').value, 16) || 0x12345678;
  
  r1 = (KEY ^ IV) >>> 0;
  r2 = (KEY + IV) >>> 0;
  r3 = 0b10101;
  r4 = 0b01011;
  r5 = (~KEY) >>> 0;
  r6 = 0;
  r7 = (KEY * 31) >>> 0;
  r8 = (IV ^ 0xDEADBEEF) >>> 0;
  r9 = 0b11010;
  r10 = 0;
  
  step = 0;
  totalOps = 0;
  keyCycles = 0;
  previousCipher = 0;
  operationHistory = [];
  
  updateStats();
  addToHistory('System reinitialized with new parameters');
}

// Enhanced S-box with dynamic capability
const DYNAMIC_SBOX = [
  [12,5,6,11,9,0,10,13,3,14,15,8,4,7,1,2,2,1,7,4,8,15,14,3,13,10,0,9,11,6,5,12],
  [8,6,7,9,3,12,10,15,13,1,5,0,14,4,2,11,11,2,4,14,0,5,1,13,15,10,12,3,9,7,6,8],
  [15,0,6,8,11,1,9,2,5,12,14,10,7,3,13,4,4,13,3,7,10,14,12,5,2,9,1,11,8,6,0,15]
];

// Permutation layer for additional diffusion
const PERMUTATION = [2, 4, 1, 0, 3];

// Advanced rotors
function rotor1(x) {
  r1 ^= r1 << 13;
  r1 ^= r1 >>> 17;
  r1 ^= r1 << 5;
  r1 >>>= 0;
  return x ^ ((r1 >>> 27) & 31);
}

function rotor2(x) {
  if (step % 2 === 0)
    r2 = (1664525 * r2 + 1013904223) >>> 0;
  return x ^ ((r2 >>> 26) & 31);
}

function rotor3(x) {
  r3 = ((r3 << 1) | (r3 >> 4)) & 31;
  return x ^ r3;
}

function rotor4(x) {
  const sboxIndex = step % 3;
  r4 = DYNAMIC_SBOX[sboxIndex][r4];
  return DYNAMIC_SBOX[sboxIndex][x ^ r4] & 31;
}

function rotor5(x) {
  r5 ^= r5 << 7;
  r5 ^= r5 >>> 9;
  r5 >>>= 0;
  return x ^ ((r5 >>> 25) & 31);
}

function rotor6(x) {
  r6 = (r6 + 1) & 31;
  return x ^ r6;
}

// New advanced rotors
function rotor7(x) {
  // TEA-inspired rotation
  r7 = (r7 + ((r7 << 4) ^ (r7 >>> 5)) + 0x9E3779B9) >>> 0;
  return x ^ ((r7 >>> 24) & 31);
}

function rotor8(x) {
  // Feistel network inspired
  if (step % 3 === 0) {
    r8 = ((r8 << 3) | (r8 >>> 29)) ^ 0x12345678;
  }
  return x ^ ((r8 >>> 23) & 31);
}

function rotor9(x) {
  // Advanced rotation with variable step
  const rotStep = (step % 5) + 1;
  r9 = ((r9 << rotStep) | (r9 >>> (32 - rotStep))) & 31;
  return x ^ r9;
}

function rotor10(x) {
  // Chaotic counter
  r10 = (r10 + step) & 31;
  return x ^ r10;
}

// Permutation layer
function permute(x) {
  let result = 0;
  const bits = numToBits(x);
  for (let i = 0; i < 5; i++) {
    result = (result << 1) | bits[PERMUTATION[i]];
  }
  return result;
}

// Key schedule
function updateKeySchedule() {
  if (step % 100 === 0) {
    KEY = (KEY ^ (KEY << 13) ^ (KEY >>> 19)) >>> 0;
    keyCycles++;
    addToHistory(`Key schedule updated - Cycle ${keyCycles}`);
  }
}

// Multiple rounds processing
function processRounds(x) {
  const rounds = parseInt(document.getElementById('rounds').value) || 3;
  let result = x;
  
  for (let round = 0; round < rounds; round++) {
    // Apply permutation
    result = permute(result);
    
    // Apply all rotors
    result = rotor1(result);
    result = rotor2(result);
    result = rotor3(result);
    result = rotor4(result);
    result = rotor5(result);
    result = rotor6(result);
    result = rotor7(result);
    result = rotor8(result);
    result = rotor9(result);
    result = rotor10(result);
    
    // Final mixing
    result = result ^ ((KEY >>> round) & 31);
  }
  
  return result & 31;
}

// Mode-specific processing
function processWithMode(input) {
  currentMode = document.getElementById('mode').value;
  let result;
  
  switch (currentMode) {
    case 'cbc':
      result = input ^ previousCipher;
      result = processRounds(result);
      previousCipher = result;
      break;
      
    case 'ctr':
      const counter = step & 31;
      result = input ^ counter;
      result = processRounds(result);
      break;
      
    case 'chain':
      result = processRounds(input);
      // Chain output as next input modifier
      result = result ^ ((previousCipher >>> 2) & 31);
      previousCipher = result;
      break;
      
    default: // ECB
      result = processRounds(input);
      break;
  }
  
  return result;
}

// Bit conversion helpers
function bitsToNum(bits) {
  return bits.reduce((a, b) => (a << 1) | b, 0);
}

function numToBits(n) {
  return Array.from({ length: 5 }, (_, i) => (n >> (4 - i)) & 1);
}

// Update rotor display
function updateRotorInfo() {
  document.getElementById('r1-info').textContent = (r1 >>> 27) & 31;
  document.getElementById('r2-info').textContent = (r2 >>> 26) & 31;
  document.getElementById('r3-info').textContent = r3.toString(2).padStart(5, '0');
  document.getElementById('r4-info').textContent = r4.toString(16).toUpperCase();
  document.getElementById('r5-info').textContent = (r5 >>> 25) & 31;
  document.getElementById('r6-info').textContent = r6;
  document.getElementById('r7-info').textContent = (r7 >>> 24) & 31;
  document.getElementById('r8-info').textContent = (r8 >>> 23) & 31;
  document.getElementById('r9-info').textContent = r9.toString(2).padStart(5, '0');
  document.getElementById('r10-info').textContent = r10;
}

// Calculate entropy
function calculateEntropy() {
  const values = [r1, r2, r3, r4, r5, r6, r7, r8, r9, r10];
  const frequency = {};
  
  values.forEach(v => {
    const key = v & 31;
    frequency[key] = (frequency[key] || 0) + 1;
  });
  
  let entropy = 0;
  Object.values(frequency).forEach(count => {
    const p = count / values.length;
    if (p > 0) entropy -= p * Math.log2(p);
  });
  
  return entropy.toFixed(2);
}

// Update statistics
function updateStats() {
  document.getElementById('totalOps').textContent = totalOps;
  document.getElementById('entropy').textContent = calculateEntropy();
  document.getElementById('cycles').textContent = keyCycles;
  
  // Calculate diffusion (simplified)
  const diffusion = Math.min(100, (totalOps * 2.5) % 100);
  document.getElementById('diffusion').textContent = diffusion + '%';
}

// Add to history
function addToHistory(message) {
  const timestamp = new Date().toLocaleTimeString();
  const historyItem = `[${timestamp}] ${message}`;
  operationHistory.unshift(historyItem);
  
  if (operationHistory.length > 10) {
    operationHistory.pop();
  }
  
  history.innerHTML = operationHistory.map(item => 
    `<div class="history-item">${item}</div>`
  ).join('');
}

// Betting system functions
function formatCurrency(amount) {
  return amount.toLocaleString('vi-VN');
}

function formatCurrencyWithSeparator(amount) {
  // Format ƒë√∫ng chu·∫©n Vi·ªát Nam: m·ªói 3 s·ªë c√≥ 1 d·∫•u ch·∫•m
  return amount.toLocaleString('vi-VN');
}

function updateCapitalDisplay() {
  currentCapitalDisplay.textContent = formatCurrencyWithSeparator(currentCapital);
  
  // Hi·ªÉn th·ªã l√£i c·ªßa round hi·ªán t·∫°i
  profitDisplay.textContent = (roundProfit >= 0 ? '+' : '') + formatCurrencyWithSeparator(roundProfit);
  
  // Update profit display styling
  profitDisplay.classList.remove('positive', 'negative');
  if (roundProfit > 0) {
    profitDisplay.classList.add('positive');
  } else if (roundProfit < 0) {
    profitDisplay.classList.add('negative');
  }
  
  // Ki·ªÉm tra ng∆∞·ª°ng l√£i 20%
  const totalProfit = currentCapital - initialCapital;
  const profitPercentage = (totalProfit / initialCapital) * 100;
  
  if (profitPercentage >= 20 && !profitThresholdReached && bettingActive) {
    profitThresholdReached = true;
    bettingActive = false;
    
    // Hi·ªÉn th·ªã th√¥ng b√°o
    gameStatusDisplay.textContent = 'üéâ H√¥m nay,nh∆∞ th·∫ø l√† ƒë·ªß r·ªìi ng√†y mai h√£y ti·∫øp t·ª•c!Tham lam l√† m·∫•t h·∫øt ƒë·∫•y @-@';
    gameStatusDisplay.classList.remove('play-prompt', 'warning');
    gameStatusDisplay.classList.add('success-pulse');
    gameStatusDisplay.style.border = '3px solid #10b981';
    gameStatusDisplay.style.color = '#ffffff';
    gameStatusDisplay.style.fontSize = '1.4em';
    
    // Th√¥ng b√°o tr√¨nh duy·ªát
    if (Notification.permission === "granted") {
      new Notification("üéâ M·ª•c Ti√™u ƒê·∫°t ƒê∆∞·ª£c!", {
        body: `L√£i ${formatCurrencyWithSeparator(totalProfit)} (${profitPercentage.toFixed(1)}%) - H√¥m nay nhu th·∫ø l√† ƒë·ªß r·ªìi!`,
        icon: "üéØ",
        requireInteraction: true
      });
    } else if (Notification.permission !== "denied") {
      Notification.requestPermission().then(permission => {
        if (permission === "granted") {
          new Notification("üéâ M·ª•c Ti√™u ƒê·∫°t ƒê∆∞·ª£c!", {
            body: `L√£i ${formatCurrencyWithSeparator(totalProfit)} (${profitPercentage.toFixed(1)}%) - H√¥m nay nhu th·∫ø l√† ƒë·ªß r·ªìi!`,
            icon: "üéØ",
            requireInteraction: true
          });
        }
      });
    }
    
    addToBettingHistory(`üéâ ƒê·∫°t ng∆∞·ª°ng l√£i 20%! L√£i: ${formatCurrencyWithSeparator(totalProfit)} - D·ª´ng game`, true);
    addToHistory(`Profit threshold reached: ${formatCurrencyWithSeparator(totalProfit)} (${profitPercentage.toFixed(1)}%)`);
  }
  
  if (currentCapital <= 0) {
    gameStatusDisplay.textContent = 'üíî H·∫øt v·ªën - K·∫øt th√∫c tr√≤ ch∆°i!';
    gameStatusDisplay.style.background = 'linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(185, 28, 28, 0.2))';
    bettingActive = false;
  }
}

function addToBettingHistory(message, isWin = null) {
  const timestamp = new Date().toLocaleTimeString();
  const historyItem = document.createElement('div');
  historyItem.className = 'bet-history-item';
  if (isWin === true) historyItem.classList.add('win');
  if (isWin === false) historyItem.classList.add('lose');
  historyItem.textContent = `[${timestamp}] ${message}`;
  
  bettingHistoryPanel.insertBefore(historyItem, bettingHistoryPanel.firstChild);
  
  if (bettingHistoryPanel.children.length > 10) {
    bettingHistoryPanel.removeChild(bettingHistoryPanel.lastChild);
  }
}

function setCapital() {
  // Parse gi√° tr·ªã t·ª´ input, lo·∫°i b·ªè d·∫•u ch·∫•m v√† d·∫•u ph·∫©y
  const capitalValue = parseInt(initialCapitalInput.value.replace(/[.,]/g, '')) || 10000000;
  
  if (capitalValue < 1000) {
    gameStatusDisplay.textContent = '‚ö†Ô∏è V·ªën t·ªëi thi·ªÉu l√† 1,000';
    gameStatusDisplay.classList.add('warning');
    setTimeout(() => {
      gameStatusDisplay.classList.remove('warning');
      gameStatusDisplay.textContent = 'üéÆ B·∫§M N√öT "PLAY" ƒê·ªÇ B·∫ÆT ƒê·∫¶U TR√í CH∆†I!';
      gameStatusDisplay.classList.add('play-prompt');
    }, 3000);
    return;
  }
  
  // Cho ph√©p tƒÉng v·ªën c·∫£ khi ƒëang ch∆°i v√† khi ch∆∞a ch∆°i
  if (!bettingActive) {
    // Ch∆∞a ch∆°i - c·∫≠p nh·∫≠t v·ªën ban ƒë·∫ßu v√† v·ªën hi·ªán t·∫°i
    initialCapital = capitalValue;
    currentCapital = capitalValue;
    roundProfit = 0; // Reset l√£i round
    updateCapitalDisplay();
    
    // Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng
    gameStatusDisplay.textContent = `üí∞ ƒê√£ nh·∫≠p v·ªën: ${formatCurrencyWithSeparator(capitalValue)} - Vui l√≤ng nh·∫≠p m·ª©c c∆∞·ª£c`;
    gameStatusDisplay.classList.remove('warning');
    gameStatusDisplay.classList.add('bet-prompt');
    gameStatusDisplay.style.background = 'linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(251, 191, 36, 0.2))';
    gameStatusDisplay.style.border = '2px solid rgba(245, 158, 11, 0.5)';
    gameStatusDisplay.style.color = '#f59e0b';
    
    addToBettingHistory(`Nh·∫≠p v·ªën: ${formatCurrencyWithSeparator(capitalValue)}`);
    addToHistory(`Capital set to: ${formatCurrencyWithSeparator(capitalValue)}`);
    
    // Focus ngay l·∫≠p t·ª©c v√†o √¥ m·ª©c c∆∞·ª£c ƒë·∫ßu ti√™n
    document.getElementById('mult1').focus();
  } else {
    // ƒêang ch∆°i - ch·ªâ tƒÉng v·ªën hi·ªán t·∫°i, kh√¥ng thay ƒë·ªïi v·ªën ban ƒë·∫ßu
    if (capitalValue > currentCapital) {
      const capitalIncrease = capitalValue - currentCapital;
      currentCapital = capitalValue;
      updateCapitalDisplay();
      
      // Hi·ªÉn th·ªã th√¥ng b√°o tƒÉng v·ªën th√†nh c√¥ng
      gameStatusDisplay.textContent = `üí∞ ƒê√£ tƒÉng v·ªën: +${formatCurrencyWithSeparator(capitalIncrease)} - Vui l√≤ng nh·∫≠p m·ª©c c∆∞·ª£c`;
      gameStatusDisplay.classList.remove('warning');
      gameStatusDisplay.classList.add('bet-prompt');
      gameStatusDisplay.style.background = 'linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(251, 191, 36, 0.2))';
      gameStatusDisplay.style.border = '2px solid rgba(245, 158, 11, 0.5)';
      gameStatusDisplay.style.color = '#f59e0b';
      
      addToBettingHistory(`TƒÉng v·ªën: +${formatCurrencyWithSeparator(capitalIncrease)} - V·ªën m·ªõi: ${formatCurrencyWithSeparator(currentCapital)}`);
      addToHistory(`Capital increased by: ${formatCurrencyWithSeparator(capitalIncrease)}`);
      
      // Focus ngay l·∫≠p t·ª©c v√†o √¥ input m·ª©c c∆∞·ª£c ƒë·∫ßu ti√™n
      document.getElementById('mult1').focus();
    } else if (capitalValue < currentCapital) {
      // Kh√¥ng cho ph√©p gi·∫£m v·ªën khi ƒëang ch∆°i
      gameStatusDisplay.textContent = '‚ö†Ô∏è Kh√¥ng th·ªÉ gi·∫£m v·ªën khi ƒëang ch∆°i! Ch·ªâ c√≥ th·ªÉ tƒÉng v·ªën.';
      gameStatusDisplay.classList.add('warning');
      setTimeout(() => {
        gameStatusDisplay.classList.remove('warning');
        gameStatusDisplay.textContent = 'üéÆ ƒêang ch∆°i - Nh·∫≠p 5 bit ƒë·ªÉ b·∫Øt ƒë·∫ßu';
      }, 3000);
    } else {
      // V·ªën kh√¥ng ƒë·ªïi
      gameStatusDisplay.textContent = 'üí∞ V·ªën kh√¥ng thay ƒë·ªïi - Vui l√≤ng nh·∫≠p m·ª©c c∆∞·ª£c';
      gameStatusDisplay.classList.remove('warning');
      gameStatusDisplay.classList.add('bet-prompt');
      gameStatusDisplay.style.background = 'linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(251, 191, 36, 0.2))';
      gameStatusDisplay.style.border = '2px solid rgba(245, 158, 11, 0.5)';
      gameStatusDisplay.style.color = '#f59e0b';
      
      // Focus ngay l·∫≠p t·ª©c v√†o √¥ input m·ª©c c∆∞·ª£c ƒë·∫ßu ti√™n
      document.getElementById('mult1').focus();
    }
  }
}

function startBetting() {
  // Parse gi√° tr·ªã t·ª´ input, lo·∫°i b·ªè d·∫•u ch·∫•m
  const initialCapitalValue = parseInt(initialCapitalInput.value.replace(/\./g, '')) || 10000000;
  if (initialCapitalValue < 1000) {
    gameStatusDisplay.textContent = '‚ö†Ô∏è V·ªën t·ªëi thi·ªÉu l√† 1,000';
    gameStatusDisplay.classList.add('warning');
    setTimeout(() => {
      gameStatusDisplay.classList.remove('warning');
      gameStatusDisplay.textContent = 'üéÆ B·∫§M N√öT "PLAY" ƒê·ªÇ B·∫ÆT ƒê·∫¶U TR√í CH∆†I!';
      gameStatusDisplay.classList.add('play-prompt');
    }, 3000);
    return;
  }
  
  initialCapital = initialCapitalValue;
  currentCapital = initialCapitalValue;
  bettingActive = true;
  currentBetRound = 0;
  profitThresholdReached = false; // Reset flag khi b·∫Øt ƒë·∫ßu game m·ªõi
  updateCapitalDisplay();
  
  // Enable input fields
  inputs.forEach(inp => inp.classList.remove('disabled'));
  
  // Auto focus v√†o √¥ input ƒë·∫ßu ti√™n
  inputs[0].focus();
  
  // T·∫Øt animation n√∫t Play
  startBettingBtn.classList.remove('play-pulse');
  
  // T·∫Øt th√¥ng b√°o nh·∫•p nh√°y v√† hi·ªÉn th·ªã tr·∫°ng th√°i ch∆°i
  gameStatusDisplay.classList.remove('play-prompt', 'warning');
  gameStatusDisplay.textContent = 'üéÆ ƒêang ch∆°i - Nh·∫≠p 5 bit ƒë·ªÉ b·∫Øt ƒë·∫ßu';
  gameStatusDisplay.style.background = 'linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1))';
  gameStatusDisplay.style.border = '2px solid rgba(245, 158, 11, 0.3)';
  gameStatusDisplay.style.color = '#e2e8f0';
  gameStatusDisplay.style.fontSize = '1.2em';
  
  addToBettingHistory('B·∫Øt ƒë·∫ßu ch∆°i v·ªõi v·ªën: ' + formatCurrencyWithSeparator(currentCapital));
  addToHistory('Game started with capital: ' + formatCurrencyWithSeparator(currentCapital));
}

function processBetting(autoInputVals, outputVals) {
  if (!bettingActive) return;
  
  currentBetRound++;
  const multipliers = Array.from(multiplierInputs).map(input => parseInt(input.value) || 1);
  let totalDeducted = 0;
  let matchFound = false;
  let matchPosition = -1;
  
  // Reset l√£i round m·ªõi
  roundProfit = 0;
  
  console.log('Processing betting round', currentBetRound, 'multipliers:', multipliers);
  
  // Check t·ª´ng bit t·ª´ 1-5
  for (let i = 0; i < 5; i++) {
    if (autoInputVals[i] !== "") {
      const betAmount = baseBetAmount * multipliers[i];
      
      console.log(`Bit ${i + 1}: auto=${autoInputVals[i]}, output=${outputVals[i]}, bet=${betAmount}`);
      
      if (autoInputVals[i] === outputVals[i]) {
        // C√≥ match - c·ªông 80% v√† TI·∫æP T·ª§C CH∆†I (kh√¥ng d·ª´ng)
        matchFound = true;
        matchPosition = i;
        const winAmount = Math.floor(betAmount * 0.8);
        currentCapital += winAmount;
        roundProfit += winAmount; // C·ªông v√†o l√£i round
        
        console.log(`MATCH at position ${i + 1}! Win amount: ${winAmount}`);
        
        gameStatusDisplay.textContent = `üéâ Th·∫Øng! +${formatCurrencyWithSeparator(winAmount)} t·∫°i v·ªã tr√≠ ${i + 1} - Ti·∫øp t·ª•c v√≤ng ${currentBetRound + 1}`;
        addToBettingHistory(`Th·∫Øng ${formatCurrencyWithSeparator(winAmount)} t·∫°i v·ªã tr√≠ ${i + 1} - V·ªën: ${formatCurrencyWithSeparator(currentCapital)} - Ti·∫øp t·ª•c ch∆°i`, true);
        
        // KH√îNG d·ª´ng betting - ti·∫øp t·ª•c ch∆°i
        break;
      } else {
        // Kh√¥ng match - tr·ª´ ti·ªÅn
        currentCapital -= betAmount;
        totalDeducted += betAmount;
        roundProfit -= betAmount; // Tr·ª´ v√†o l√£i round
        
        console.log(`NO MATCH at position ${i + 1}. Deducting: ${betAmount}`);
        
        gameStatusDisplay.textContent = `‚ùå Bit ${i + 1} kh√¥ng tr√πng - Tr·ª´ ${formatCurrencyWithSeparator(betAmount)} - V√≤ng ${currentBetRound}`;
        addToBettingHistory(`Bit ${i + 1} kh√¥ng tr√πng - Tr·ª´ ${formatCurrencyWithSeparator(betAmount)} - V·ªën: ${formatCurrencyWithSeparator(currentCapital)}`, false);
        
        // Ki·ªÉm tra h·∫øt v·ªën
        if (currentCapital <= 0) {
          bettingActive = false;
          gameStatusDisplay.textContent = 'üíî H·∫øt v·ªën - K·∫øt th√∫c tr√≤ ch∆°i!';
          break;
        }
      }
    }
  }
  
  updateCapitalDisplay();
  
  // Auto clear inputs for next round if still betting
  if (bettingActive && currentCapital > 0) {
    setTimeout(() => {
      inputs.forEach(i => i.value = "");
      inputs[0].focus();
      gameStatusDisplay.textContent = `üéÆ V√≤ng ${currentBetRound + 1} - Nh·∫≠p 5 bit ti·∫øp theo`;
    }, 1500);
  }
  
  console.log('Final capital:', currentCapital, 'Betting active:', bettingActive, 'Round profit:', roundProfit);
}

// Auto-processing function
function autoCompute() {
  const vals = [...autoInputs].map(i => i.value);
  if (vals.some(v => v === "")) return;

  let x = bitsToNum(vals.map(Number));
  step++;
  totalOps++;
  
  // Update key schedule
  updateKeySchedule();
  
  // Process with selected mode
  let result = processWithMode(x);
  
  const out = numToBits(result & 31);
  out.forEach((b, i) => outputs[i].value = b);
  
  // Update displays
  updateRotorInfo();
  updateStats();
  
  const hexOutput = result.toString(16).toUpperCase();
  info.textContent = `üî¢ Step ${step} | Auto-Processed: ${hexOutput} | Mode: ${currentMode.toUpperCase()} | Rounds: ${document.getElementById('rounds').value}`;
  
  addToHistory(`Auto ${vals.join('')} ‚Üí ${out.join('')} (0x${hexOutput})`);
}

// Compare auto inputs with outputs and highlight matches
function compareAndHighlight() {
  const autoVals = [...autoOuts].map(i => i.value);
  const outputVals = [...outputs].map(i => i.value);
  
  // Remove all match classes first
  autoOuts.forEach(input => input.classList.remove('match'));
  
  // Check for matches and highlight
  autoVals.forEach((autoVal, index) => {
    if (autoVal !== "" && autoVal === outputVals[index]) {
      autoOuts[index].classList.add('match');
    }
  });
}

// Main encryption/decryption function
function compute(encryptMode = true) {
  const vals = [...inputs].map(i => i.value);
  if (vals.some(v => v === "")) return;

  let x = bitsToNum(vals.map(Number));
  step++;
  totalOps++;
  
  // Update key schedule
  updateKeySchedule();
  
  // Process with selected mode
  let result = processWithMode(x);
  
  if (!encryptMode) {
    // For decryption, we'd need to reverse the process
    // This is simplified - real decryption would require storing states
    result = processRounds(x ^ 0x55555); // Simple reverse example
  }
  
  const out = numToBits(result & 31);
  out.forEach((b, i) => outputs[i].value = b);
  
  // Update displays
  updateRotorInfo();
  updateStats();
  
  const modeText = encryptMode ? 'Encrypted' : 'Decrypted';
  const hexOutput = result.toString(16).toUpperCase();
  info.textContent = `üî¢ Step ${step} | ${modeText}: ${hexOutput} | Mode: ${currentMode.toUpperCase()} | Rounds: ${document.getElementById('rounds').value}`;
  
  addToHistory(`${modeText} ${vals.join('')} ‚Üí ${out.join('')} (0x${hexOutput})`);
  
  // Compare and highlight matches after encryption
  if (autoOuts[0].value !== "") {
    compareAndHighlight();
  }
}

// Reset function
function softReset() {
  inputs.forEach(i => i.value = "");
  autoOuts.forEach(i => {
    i.value = "";
    i.classList.remove('match');
  });
  outputs.forEach(o => o.value = "");
  previousCipher = 0;
  info.textContent = "Advanced Enigma Ready - 10 Rotors Active";
  
  // Reset betting system - b·∫Øt ƒë·∫ßu l·∫°i t·ª´ ƒë·∫ßu
  bettingActive = false;
  currentBetRound = 0;
  roundProfit = 0;
  initialCapital = 0;
  currentCapital = 0;
  updateCapitalDisplay();
  
  // X√≥a gi√° tr·ªã trong √¥ nh·∫≠p v·ªën
  initialCapitalInput.value = "";
  
  // Disable input fields
  inputs.forEach(inp => inp.classList.add('disabled'));
  
  // Hide random button
  randomBtn.style.display = 'none';
  
  // T·∫Øt animation n√∫t Play
  startBettingBtn.classList.remove('play-pulse');
  
  // Hi·ªÉn th·ªã th√¥ng b√°o y√™u c·∫ßu nh·∫≠p v·ªën
  gameStatusDisplay.classList.remove('warning', 'play-prompt', 'bet-prompt');
  gameStatusDisplay.textContent = 'üí∞ Vui l√≤ng nh·∫≠p v·ªën v√† m·ª©c c∆∞·ª£c ƒë·ªÉ b·∫Øt ƒë·∫ßu';
  gameStatusDisplay.style.background = 'linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(239, 68, 68, 0.1))';
  gameStatusDisplay.style.border = '2px solid rgba(245, 158, 11, 0.3)';
  gameStatusDisplay.style.color = '#e2e8f0';
  gameStatusDisplay.style.fontSize = '1.2em';
  
  // Focus v√†o √¥ input v·ªën ban ƒë·∫ßu
  initialCapitalInput.focus();
  
  // Clear betting history
  bettingHistoryPanel.innerHTML = '<div class="bet-history-item">H·ªá th·ªëng ƒë·∫∑t c∆∞·ª£c ƒë√£ s·∫µn s√†ng</div>';
  
  addToHistory('System reset - Betting game reset - Ready for new operation');
}

// Export state
function exportState() {
  const state = {
    KEY: KEY.toString(16).toUpperCase(),
    IV: IV.toString(16).toUpperCase(),
    rotors: [r1, r2, r3, r4, r5, r6, r7, r8, r9, r10],
    step: step,
    mode: currentMode,
    rounds: document.getElementById('rounds').value
  };
  
  const stateJson = JSON.stringify(state, null, 2);
  const blob = new Blob([stateJson], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'enigma-state.json';
  a.click();
  URL.revokeObjectURL(url);
  
  addToHistory('State exported to file');
}

// Import state
function importState() {
  const input = document.createElement('input');
  input.type = 'file';
  input.accept = '.json';
  input.onchange = (e) => {
    const file = e.target.files[0];
    const reader = new FileReader();
    reader.onload = (event) => {
      try {
        const state = JSON.parse(event.target.result);
        KEY = parseInt(state.KEY, 16);
        IV = parseInt(state.IV, 16);
        [r1, r2, r3, r4, r5, r6, r7, r8, r9, r10] = state.rotors;
        step = state.step;
        currentMode = state.mode;
        document.getElementById('mode').value = state.mode;
        document.getElementById('rounds').value = state.rounds;
        document.getElementById('customKey').value = state.KEY;
        document.getElementById('customIV').value = state.IV;
        
        updateRotorInfo();
        updateStats();
        addToHistory('State imported successfully');
      } catch (error) {
        addToHistory('Error importing state: Invalid file format');
      }
    };
    reader.readAsText(file);
  };
  input.click();
}

// Event listener for initial capital input
initialCapitalInput.addEventListener('input', () => {
  // Format s·ªë ti·ªÅn khi nh·∫≠p
  const value = parseInt(initialCapitalInput.value.replace(/\./g, '')) || 0;
  if (value >= 1000) {
    initialCapitalInput.value = formatCurrencyWithSeparator(value);
  }
});

initialCapitalInput.addEventListener('focus', () => {
  // X√≥a format ƒë·ªÉ user nh·∫≠p s·ªë m·ªõi
  const value = parseInt(initialCapitalInput.value.replace(/\./g, '')) || 0;
  initialCapitalInput.value = value;
});

initialCapitalInput.addEventListener('blur', () => {
  // Format l·∫°i khi m·∫•t focus
  const value = parseInt(initialCapitalInput.value) || 0;
  if (value >= 1000) {
    initialCapitalInput.value = formatCurrencyWithSeparator(value);
  }
});

// Event listeners for main inputs
inputs.forEach((inp, idx) => {
  inp.addEventListener("input", () => {
    // Ch·ªâ cho ph√©p nh·∫≠p khi betting ƒë√£ ƒë∆∞·ª£c k√≠ch ho·∫°t
    if (!bettingActive) {
      inp.value = "";
      
      // Hi·ªÉn th·ªã th√¥ng b√°o n·ªïi b·∫≠t
      gameStatusDisplay.textContent = '‚ö†Ô∏è VUI L√íNG B·∫§M "PLAY" TR∆Ø·ªöC KHI NH·∫¨P BIT!';
      gameStatusDisplay.classList.add('warning');
      
      // Th√¥ng b√°o tr√¨nh duy·ªát
      if (Notification.permission === "granted") {
        new Notification("Enigma Betting", {
          body: "Vui l√≤ng b·∫•m 'Play' tr∆∞·ªõc khi nh·∫≠p bit!",
          icon: "‚ö†Ô∏è",
          requireInteraction: true
        });
      } else if (Notification.permission !== "denied") {
        Notification.requestPermission().then(permission => {
          if (permission === "granted") {
            new Notification("Enigma Betting", {
              body: "Vui l√≤ng b·∫•m 'Play' tr∆∞·ªõc khi nh·∫≠p bit!",
              icon: "‚ö†Ô∏è",
              requireInteraction: true
            });
          }
        });
      }
      
      // T·ª± ƒë·ªông t·∫Øt sau 3 gi√¢y
      setTimeout(() => {
        gameStatusDisplay.classList.remove('warning');
        gameStatusDisplay.textContent = 'ÔøΩ B·∫§M N√öT "PLAY" ƒê·ªÇ B·∫ÆT ƒê·∫¶U TR√í CH∆†I!';
        gameStatusDisplay.classList.add('play-prompt');
      }, 3000);
      return;
    }
    
    if (inp.value !== "0" && inp.value !== "1") {
      inp.value = "";
      return;
    }
    if (idx < inputs.length - 1)
      inputs[idx + 1].focus();
    
    // Check if all inputs are filled, then auto process random
    const allFilled = [...inputs].every(i => i.value !== "");
    if (allFilled) {
      // Compute encryption
      compute(true);
      
      // Auto trigger random immediately
      setTimeout(() => {
        processRandom();
      }, 500);
    }
  });

  inp.addEventListener("keydown", e => {
    if (e.key === "Backspace" && inp.value === "" && idx > 0)
      inputs[idx - 1].focus();
  });
});

// Random function
function generateRandomBits() {
  const randomBits = [];
  for (let i = 0; i < 5; i++) {
    randomBits.push(Math.random() < 0.5 ? '0' : '1');
  }
  return randomBits;
}

function processRandom() {
  const randomBits = generateRandomBits();
  
  // Hi·ªÉn th·ªã random bits trong auto-out
  randomBits.forEach((bit, i) => {
    autoOuts[i].value = bit;
  });
  
  // Compare and highlight matches
  compareAndHighlight();
  
  // Process betting if active
  if (bettingActive) {
    const outputVals = [...outputs].map(i => i.value);
    processBetting(randomBits, outputVals);
  }
  
  // Clear inputs for next round if still betting
  if (bettingActive && currentCapital > 0) {
    setTimeout(() => {
      inputs.forEach(i => i.value = "");
      inputs[0].focus();
      gameStatusDisplay.textContent = `üéÆ V√≤ng ${currentBetRound + 1} - Nh·∫≠p 5 bit ti·∫øp theo`;
    }, 1500);
  }
}

// Event listener for random button
randomBtn.onclick = processRandom;

document.getElementById("encrypt").onclick = () => compute(true);
document.getElementById("decrypt").onclick = () => compute(false);
document.getElementById("reset").onclick = softReset;
document.getElementById("export").onclick = exportState;
document.getElementById("import").onclick = importState;

// Betting system event listeners
startBettingBtn.onclick = startBetting;
setCapitalBtn.onclick = setCapital;

// Multiplier input validation v√† auto-focus
multiplierInputs.forEach((input, index) => {
  input.addEventListener('input', () => {
    // Cho ph√©p gi√° tr·ªã b·∫•t k·ª≥, ch·ªâ ƒë·∫£m b·∫£o kh√¥ng r·ªóng
    let value = parseInt(input.value) || 0;
    if (value < 0) value = 0; // Ch·ªâ ƒë·∫£m b·∫£o kh√¥ng √¢m
    input.value = value;
    
    // N·∫øu √¥ ƒë√£ c√≥ gi√° tr·ªã, t·ª± ƒë·ªông focus sang √¥ ti·∫øp theo sau 2 gi√¢y
    if (input.value !== '' && input.value !== '0' && index < multiplierInputs.length - 1) {
      setTimeout(() => {
        multiplierInputs[index + 1].focus();
      }, 2000);
    }
    
    // Ki·ªÉm tra n·∫øu nh·∫≠p xong √¥ s·ªë 5 v√† t·∫•t c·∫£ √¥ ƒë·ªÅu c√≥ gi√° tr·ªã
    if (index === multiplierInputs.length - 1 && input.value !== '' && input.value !== '0') {
      // Ki·ªÉm tra t·∫•t c·∫£ c√°c √¥ ƒë·ªÅu ƒë√£ c√≥ gi√° tr·ªã
      const allFilled = [...multiplierInputs].every(inp => inp.value !== '' && inp.value !== '0');
      
      if (allFilled) {
        // K√≠ch ho·∫°t n√∫t Play nh·∫•p nh√°y
        startBettingBtn.classList.add('play-pulse');
        
        // Hi·ªÉn th·ªã th√¥ng b√°o b·∫•m Play ƒë·ªÉ b·∫Øt ƒë·∫ßu ch∆°i
        gameStatusDisplay.textContent = 'üéÆ B·∫§M N√öT "PLAY" ƒê·ªÇ B·∫ÆT ƒê·∫¶U CH∆†I!';
        gameStatusDisplay.classList.remove('warning', 'bet-prompt');
        gameStatusDisplay.classList.add('play-prompt');
        gameStatusDisplay.style.background = 'linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(29, 78, 216, 0.3))';
        gameStatusDisplay.style.border = '3px solid #3b82f6';
        gameStatusDisplay.style.color = '#ffffff';
        gameStatusDisplay.style.fontSize = '1.3em';
        
        // Focus v√†o n√∫t Play
        setTimeout(() => {
          startBettingBtn.focus();
        }, 1000);
      }
    }
  });
});

// Mode change handler
document.getElementById('mode').addEventListener('change', () => {
  currentMode = document.getElementById('mode').value;
  addToHistory(`Mode changed to ${currentMode.toUpperCase()}`);
});

// Key/IV change handlers
document.getElementById('customKey').addEventListener('change', () => {
  initState();
});

document.getElementById('customIV').addEventListener('change', () => {
  initState();
});

// Reset Game button handler
document.getElementById('reset').addEventListener('click', () => {
  // Reset t·∫•t c·∫£ bi·∫øn game
  currentCapital = 0;
  initialCapital = 0;
  bettingActive = false;
  bettingHistory = [];
  currentBetRound = 0;
  roundProfit = 0;
  profitThresholdReached = false;
  
  // Reset displays
  currentCapitalDisplay.textContent = '0';
  profitDisplay.textContent = '0';
  profitDisplay.classList.remove('positive', 'negative');
  
  // Clear inputs
  multiplierInputs.forEach(input => input.value = '');
  inputs.forEach(input => {
    input.value = '';
    input.classList.add('disabled');
  });
  outputs.forEach(output => output.value = '');
  autoOuts.forEach(output => output.value = '');
  
  // Reset game status
  gameStatusDisplay.textContent = 'üí∞ Vui l√≤ng nh·∫≠p v·ªën !!!';
  gameStatusDisplay.classList.remove('play-prompt', 'warning', 'bet-prompt', 'success-pulse');
  gameStatusDisplay.style.background = 'linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(239, 68, 68, 0.1))';
  gameStatusDisplay.style.border = '2px solid rgba(245, 158, 11, 0.3)';
  
  // Clear betting history
  bettingHistoryPanel.innerHTML = '<div class="bet-history-item">H·ªá th·ªëng ƒë·∫∑t c∆∞·ª£c ƒë√£ s·∫µn s√†ng</div>';
  
  // Reset enigma state
  softReset();
  initState();
  
  // Focus on first input
  inputs[0].focus();
});

// Initialize
initRotorDisplay();
initState();
softReset();
updateCapitalDisplay();

// Disable inputs initially
inputs.forEach(inp => inp.classList.add('disabled'));

// ƒê·∫£m b·∫£o n√∫t Play kh√¥ng nh·∫•p nh√°y khi t·∫£i trang
startBettingBtn.classList.remove('play-pulse');

// Hi·ªÉn th·ªã th√¥ng b√°o h∆∞·ªõng d·∫´n nh·∫≠p v·ªën
gameStatusDisplay.textContent = 'üí∞ Vui l√≤ng nh·∫≠p v·ªën v√† m·ª©c c∆∞·ª£c ƒë·ªÉ b·∫Øt ƒë·∫ßu';
gameStatusDisplay.classList.remove('play-prompt', 'warning', 'bet-prompt');
gameStatusDisplay.style.background = 'linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(239, 68, 68, 0.1))';
gameStatusDisplay.style.border = '2px solid rgba(245, 158, 11, 0.3)';
gameStatusDisplay.style.color = '#e2e8f0';
gameStatusDisplay.style.fontSize = '1.2em';

// Focus v√†o √¥ input v·ªën ban ƒë·∫ßu
initialCapitalInput.focus();

// Focus on first input after initialization
inputs[0].focus();
</script>

</body>
</html>


